# í•˜íŠ¸ì‹œê·¸ë„ (HeartSignal) - TRD (Technical Requirements Document)
## 4ì‹œê°„ í•´ì»¤í†¤ MVP ë²„ì „

## 1. ê¸°ìˆ  ê°œìš”

### 1.1 ì œí’ˆ ì •ì˜
**í•˜íŠ¸ì‹œê·¸ë„**ì€ ì†Œê°œíŒ… í˜„ì¥ì—ì„œì˜ **ëŒ€í™”ì™€ ê°ì • íë¦„**ì„ ìë™ ë¶„ì„í•´ **ë§¤ì¹­ìœ¨ ì ìˆ˜ì™€ í–‰ë™ í”¼ë“œë°±**ì„ ì œê³µí•˜ëŠ” ë¸Œë¼ìš°ì € ê¸°ë°˜ MVP ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

**ë¸Œëœë“œ ë¬´ë“œ**: ìœŒìœ (Willu)ì—ì„œ ì˜ê°ì„ ë°›ì€ **ë”°ëœ»í•¨(ì•ˆì‹¬Â·ë°°ë ¤) + ì‹ ë¢°ê°(ê°„ê²°Â·ì •ëˆ)**
**ë””ìì¸ ì² í•™**: "ê°ì •ì€ ì„¬ì„¸í•˜ê²Œ, ê²°ê³¼ëŠ” ê°„ë‹¨í•˜ê²Œ" - ì—¬ë°± ìš°ì„ , ì½”ë„ í†¤ ì¤‘ì‹¬

### 1.2 MVP ë²”ìœ„
- **ë¸Œë¼ìš°ì € ì „ìš© ì•±**: ëª¨ë“  ë¡œì§ì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì²˜ë¦¬, ë°±ì—”ë“œ ì—†ìŒ
- **ì‹¤ì‹œê°„ ìŒì„± ë¶„ì„**: ë…¹ìŒ + STT + prosody ë¶„ì„
- **í”„ë¡¬í”„íŠ¸ ì²´ì´ë‹**: OpenAI APIë¥¼ í†µí•œ ë‹¨ê³„ë³„ ë¶„ì„
- **ì¦‰ì‹œ í”¼ë“œë°±**: ë§¤ì¹­ìœ¨ ì ìˆ˜ + ì‹¤í–‰ ê°€ëŠ¥í•œ ê°œì„  ì œì•ˆ

### 1.3 í•µì‹¬ ì œì•½ì‚¬í•­
- **ê°œë°œ ì‹œê°„**: 4ì‹œê°„ ì´ë‚´ ì™„ì„±
- **ë°ì´í„° ì €ì¥**: React Zustand storeë§Œ ì‚¬ìš© (ì„œë²„/DB ì—†ìŒ)
- **API ì˜ì¡´ì„±**: OpenAIë§Œ (Google STTëŠ” ëŒ€ì•ˆìœ¼ë¡œ Web Speech API)
- **ë°°í¬**: ì •ì  ì›¹ì‚¬ì´íŠ¸ (Vercel/Netlify)
- **ê°œì¸ì •ë³´**: ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ì—ë§Œ ìœ ì§€, ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì‚­ì œ

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì•„í‚¤í…ì²˜ íŒ¨í„´
```
[Presentation Layer] â† ìƒíƒœ êµ¬ë…ë§Œ
         â†“
[Controller Layer] â† ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
         â†“
[Domain Layer] â† ìˆœìˆ˜ í•¨ìˆ˜ + ì™¸ë¶€ API ì–´ëŒ‘í„°
         â†“
[Store Layer] â† Zustand ì „ì—­ ìƒíƒœ
```

### 2.2 ê¸°ìˆ  ìŠ¤íƒ
- **í”„ë¡ íŠ¸ì—”ë“œ**: Next.js 14 + TypeScript + Tailwind CSS
- **ìƒíƒœê´€ë¦¬**: Zustand (PRD ëª…ì‹œ)
- **UI ì»´í¬ë„ŒíŠ¸**: shadcn/ui + Design System ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸
- **í°íŠ¸**: Pretendard (í•œê¸€) + Inter (ìˆ«ì/ê²Œì´ì§€)
- **ìŒì„±ì²˜ë¦¬**: Web Audio API + MediaRecorder API
- **STT**: Web Speech API (ìš°ì„ ) â†’ Google Speech-to-Text (ì„ íƒ)
- **AI ë¶„ì„**: OpenAI GPT-4o-mini API (ë¹„ìš© ìµœì í™”)
- **ë°°í¬**: Vercel

## 3. í´ë” êµ¬ì¡° (PRD ê¸°ì¤€)

```
/src
  /app
    page.tsx                    # ë©”ì¸ í˜ì´ì§€ (PRD: index.tsx â†’ page.tsx)
    layout.tsx                  # ë ˆì´ì•„ì›ƒ + í°íŠ¸ ì„¤ì •
    providers.tsx               # Zustand Provider
    globals.css                 # Design Token CSS ë³€ìˆ˜
  
  /components                   # [Presentation] UI ì „ìš© (propsë§Œ)
    SessionRecorder.tsx         # í° ì›í˜• Record ë²„íŠ¼ + íƒ€ì´ë¨¸
    LiveTranscriptPanel.tsx     # ë§í’ì„  ìŠ¤íƒ€ì¼ ì „ì‚¬ (ë‚˜/ìƒëŒ€ êµ¬ë¶„)
    ScoreGauge.tsx             # 0-100 ë°˜ì› ê²Œì´ì§€ (H2 í¬ê¸°)
    AnalysisSummaryCard.tsx    # ê°ì •/ë¼í¬/ê· í˜• Chip + ê·¼ê±°
    FeedbackBubble.tsx         # 2ë¬¸ì¥ ìš”ì•½ + ì‹¤í–‰ íŒ 3ê°œ
    ControlsBar.tsx            # ë‹¤ì‹œì‹œë„/ì €ì¥í•˜ê¸° ë²„íŠ¼
    /ui                         # shadcn/ui base components
  
  /store                        # [State] Zustand ì „ì—­ ìƒíƒœ
    useSessionStore.ts         # SessionState ì™„ì „ êµ¬í˜„
  
  /lib
    tokens.ts                   # Design System í† í°
    utils.ts                    # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
  
  /domain                       # [Business Logic] ìˆœìˆ˜ í•¨ìˆ˜
    /adapters
      stt.webspeech.ts         # Web Speech API ì–´ëŒ‘í„°
      stt.google.ts            # Google STT ì–´ëŒ‘í„° (í™•ì¥)
      llm.openai.ts            # OpenAI API ì–´ëŒ‘í„°
    /audio
      recorder.ts              # MediaRecorder ì œì–´
      prosody.ts               # RMS/í”¼ì¹˜ ì‹¤ì‹œê°„ ë¶„ì„
    /analysis
      promptChains.ts          # 4ë‹¨ê³„ ì²´ì´ë‹ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
      analyzers.ts             # LLM ì‘ë‹µ ì •ê·œí™”/ê²€ì¦
      scoring.ts               # ê°€ì¤‘í•© ì ìˆ˜ ê³„ì‚° (0.45*text + 0.35*voice + 0.20*balance)
      feedback.ts              # í”¼ë“œë°± ìƒì„±
    /controllers
      useAnalysisController.ts # UI â†” Domain íŒŒì‚¬ë“œ í›…
```

## 4. Design System í†µí•©

### 4.1 ë””ìì¸ í† í° (/lib/tokens.ts)
```typescript
export const tokens = {
  color: {
    // Primary - Rose Coral (ìœŒìœ  ì˜ê°)
    primary: "#E95877",
    primary500: "#F26B88", 
    primary100: "#FFE6EC",
    
    // Accent - Lilac (ë³´ì¡° í¬ì¸íŠ¸)
    accent: "#7B6EF6",
    
    // Semantic Colors
    success: "#2FBF71",    // ë¯¼íŠ¸ (ê¸ì • í”¼ë“œë°±)
    warning: "#F59E0B",    // ì•°ë²„ (ì£¼ì˜)
    danger: "#E11D48",     // ë£¨ë¹„ (ì˜¤ë¥˜)
    
    // Neutral Grays
    gray900: "#1A1A1A",    // ë³¸ë¬¸
    gray700: "#4D4D4D",    // ë³´ì¡°
    gray500: "#9CA3AF",    // placeholder
    gray100: "#F5F5F5",    // ì¹´ë“œ ë°°ê²½
    white: "#FFFFFF"
  },
  
  typography: {
    // Pretendard (í•œê¸€) + Inter (ìˆ«ì)
    fontFamily: {
      sans: ['Pretendard', 'Inter', 'system-ui'],
      mono: ['Inter', 'monospace']
    },
    fontSize: {
      h1: '40px',          // ë©”ì¸ íˆì–´ë¡œ
      h2: '28px',          // ì„¹ì…˜ íƒ€ì´í‹€ (ì ìˆ˜)
      h3: '20px',          // ì¹´ë“œ íƒ€ì´í‹€
      body: '16px',        // ë³¸ë¬¸
      caption: '13px'      // ë³´ì¡° ì„¤ëª…
    },
    lineHeight: {
      h1: '48px', h2: '36px', h3: '28px', 
      body: '26px', caption: '20px'
    },
    fontWeight: {
      regular: 400, semibold: 600, bold: 700
    }
  },
  
  spacing: (n: number) => `${n * 8}px`, // 8pt ì‹œìŠ¤í…œ
  radius: { xs: 6, md: 12, lg: 20 },
  shadow: {
    elev1: "0 1px 3px rgba(0,0,0,.08)",
    elev2: "0 8px 24px rgba(0,0,0,.12)"
  },
  motion: {
    duration: { fast: "150ms", base: "200ms", slow: "250ms" },
    easing: { out: "ease-out", spring: "cubic-bezier(0.34, 1.56, 0.64, 1)" }
  },
  zIndex: { header: 10, modal: 1000 }
};
```

### 4.2 UX Writing ê°€ì´ë“œ (Design System ë°˜ì˜)
```typescript
export const copy = {
  hero: "ë‹¹ì‹ ì˜ ë§ê³¼ ë§ˆìŒ, ìš°ë¦¬ëŠ” ì„¬ì„¸í•˜ê²Œ ë“£ìŠµë‹ˆë‹¤.",
  recording: {
    start: "ì§€ê¸ˆ ì´ ìˆœê°„ì„ ê¸°ë¡í• ê²Œìš”.",
    stop: "ë…¹ìŒì„ ì¤‘ì§€í•˜ê³  ë¶„ì„ì„ ì‹œì‘í• ê¹Œìš”?"
  },
  processing: {
    analyzing: "ë‹¹ì‹ ì˜ ëŒ€í™” ì† ê°ì •ì„ ì •ë¦¬í•˜ê³  ìˆì–´ìš”â€¦",
    progress: ["ì „ì‚¬ ì¤‘", "ê°ì • ë¶„ì„ ì¤‘", "ê²°ê³¼ ìƒì„± ì¤‘"]
  },
  results: {
    title: "ì˜¤ëŠ˜ ëŒ€í™”ì˜ í˜¸í¡, ê´œì°®ì•˜ì–´ìš”.",
    feedback: "ë‹¤ìŒë²ˆì—” ì´ë ‡ê²Œ í•´ë³´ì„¸ìš”"
  },
  privacy: "ì˜¤ë””ì˜¤ëŠ” ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ì—ë§Œ ë¨¸ë¬¼ëŸ¬ìš”. ì›í•˜ë©´ ì–¸ì œë“  ì‚­ì œí•  ìˆ˜ ìˆì–´ìš”.",
  errors: {
    permission: "ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”. ì„¤ì •ì—ì„œ ë³€ê²½í•  ìˆ˜ ìˆì–´ìš”.",
    network: "ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
    shortRecording: "ì¡°ê¸ˆ ë” ê¸¸ê²Œ ëŒ€í™” í›„ ë¶„ì„í•´ë³¼ê¹Œìš”?"
  }
};
```

## 5. ë°ì´í„° ëª¨ë¸ (PRD ê¸°ë°˜)

### 5.1 ì„¸ì…˜ ìƒíƒœ (useSessionStore)
```typescript
export type SessionPhase = "idle" | "recording" | "processing" | "done" | "error";

export interface TranscriptSegment {
  t0: number;                   // ì‹œì‘ ì‹œê°„ (ms)
  t1: number;                   // ì¢…ë£Œ ì‹œê°„ (ms)
  text: string;                 // ì „ì‚¬ëœ í…ìŠ¤íŠ¸
  speaker?: "me" | "partner";   // í™”ì êµ¬ë¶„ (ì„ íƒ)
}

export interface ProsodySample {
  t: number;                    // ì‹œê°„ (ms)
  rms: number;                  // RMS ë³¼ë¥¨ (0~1)
  pitch?: number;               // í”¼ì¹˜ (Hz, ì„ íƒ)
}

export interface EmotionAnalysis {
  valence: number;              // ê°ì • ê·¹ì„± (-1~+1)
  arousal: number;              // ê°ì • ê°ì„±ë„ (0~1)
  emotions: Array<{             // ì„¸ë¶€ ê°ì •
    label: string;              // joy, anger, sadness, fear, surprise
    score: number;              // 0~1
  }>;
}

export interface ConversationAnalysis {
  rapport: number;              // ë¼í¬ í˜•ì„±ë„ (0~1)
  turnTakingBalance: number;    // ëŒ€í™” ê· í˜•ë„ (0~1)
  empathy: number;              // ê³µê° ìˆ˜ì¤€ (0~1)
  redFlags: string[];           // ê²½ê³  ì‹ í˜¸ë“¤
  highlights: string[];         // ê¸ì •ì  í•˜ì´ë¼ì´íŠ¸ë“¤
}

export interface MatchScore {
  score: number;                // ìµœì¢… ë§¤ì¹­ìœ¨ (0~100)
  breakdown: {                  // ì„¸ë¶€ ì ìˆ˜
    text: number;               // í…ìŠ¤íŠ¸ ë¶„ì„ ì ìˆ˜
    voice: number;              // ìŒì„± ë¶„ì„ ì ìˆ˜
    balance: number;            // ëŒ€í™” ê· í˜• ì ìˆ˜
  };
}

export interface Feedback {
  summary: string;              // 2~3ë¬¸ì¥ ìš”ì•½
  tips: string[];               // ì‹¤í–‰ ê°€ëŠ¥í•œ íŒ 3ê°œ
}
```

### 4.2 ìƒíƒœ ì•¡ì…˜
```typescript
export interface SessionActions {
  reset(): void;
  setPhase(phase: SessionPhase): void;
  pushProsody(sample: ProsodySample): void;
  pushSegment(segment: TranscriptSegment): void;
  setAudioBlob(blob: Blob): void;
  setEmotion(analysis: EmotionAnalysis): void;
  setConversation(analysis: ConversationAnalysis): void;
  setMatch(score: MatchScore): void;
  setFeedback(feedback: Feedback): void;
  setError(message: string): void;
}
```

## 5. í•µì‹¬ ëª¨ë“ˆ ì„¤ê³„

### 5.1 ìŒì„± ë…¹ìŒ ëª¨ë“ˆ (/domain/audio/recorder.ts)
```typescript
interface RecorderConfig {
  sampleRate?: number;          // 16000 (ê¸°ë³¸ê°’)
  channels?: number;            // 1 (ëª¨ë…¸)
  mimeType?: string;           // 'audio/webm;codecs=opus'
}

export class AudioRecorder {
  async start(config?: RecorderConfig): Promise<void>
  async stop(): Promise<Blob>
  getChunks(): Blob[]           // ì‹¤ì‹œê°„ STTìš©
  isRecording(): boolean
}
```

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­:**
- MediaRecorder API ì‚¬ìš©
- ì‹¤ì‹œê°„ ì²­í¬ ìˆ˜ì§‘ (ì„ íƒì )
- ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í™•ì¸ (Chrome/Firefox/Safari)
- ì—ëŸ¬ í•¸ë“¤ë§ (ë§ˆì´í¬ ê¶Œí•œ, ì½”ë± ì§€ì›)

### 5.2 ìŒì„± íŠ¹ì„± ë¶„ì„ ëª¨ë“ˆ (/domain/audio/prosody.ts)
```typescript
export interface ProsodyAnalyzer {
  start(callback: (sample: ProsodySample) => void): () => void;
  calculateSummary(samples: ProsodySample[]): {
    avgRMS: number;
    rmsVariance: number;
    avgPitch?: number;
    pitchRange?: number;
  };
}
```

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­:**
- Web Audio APIë¥¼ ì´ìš©í•œ ì‹¤ì‹œê°„ RMS ê³„ì‚°
- 100ms ê°„ê²© ìƒ˜í”Œë§
- í”¼ì¹˜ ì¶”ì • (Autocorrelation, ì„ íƒì )
- ë…¸ì´ì¦ˆ í•„í„°ë§

### 5.3 STT ì–´ëŒ‘í„° (/domain/adapters/stt.webspeech.ts)
```typescript
export interface STTAdapter {
  transcribe(audioBlob: Blob): Promise<TranscriptSegment[]>;
  transcribeRealtime(
    onResult: (segment: TranscriptSegment) => void
  ): {
    start: () => void;
    stop: () => void;
  };
}
```

**ìš°ì„  êµ¬í˜„: Web Speech API**
- ë¸Œë¼ìš°ì € ë‚´ì¥, ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
- ì‹¤ì‹œê°„ ì „ì‚¬ ì§€ì›
- í•œêµ­ì–´/ì˜ì–´ ì§€ì›

**ëŒ€ì•ˆ êµ¬í˜„: Google Speech-to-Text**
- ë” ë†’ì€ ì •í™•ë„
- API í‚¤ í•„ìš”
- ë¹„ìš© ê³ ë ¤

### 5.4 LLM ì–´ëŒ‘í„° (/domain/adapters/llm.openai.ts)
```typescript
export interface LLMAdapter {
  analyze(prompt: string, data: any): Promise<any>;
  generateFeedback(analysisResults: any): Promise<Feedback>;
}

export interface OpenAIConfig {
  apiKey: string;
  model: string;              // 'gpt-4o-mini' (ë¹„ìš© ì ˆì•½)
  maxTokens: number;          // 500
  temperature: number;        // 0.3 (ì¼ê´€ëœ ê²°ê³¼)
}
```

**êµ¬í˜„ ìš”êµ¬ì‚¬í•­:**
- JSON ëª¨ë“œ ì‘ë‹µ ê°•ì œ
- ì—ëŸ¬ í•¸ë“¤ë§ ë° ì¬ì‹œë„ ë¡œì§
- í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”
- ì‘ë‹µ ê²€ì¦ ë° ìŠ¤í‚¤ë§ˆ ë§¤ì¹­

### 5.5 í”„ë¡¬í”„íŠ¸ ì²´ì´ë‹ (/domain/analysis/promptChains.ts)
```typescript
export interface AnalysisResult {
  emotion: EmotionAnalysis;
  conversation: ConversationAnalysis;
  match: MatchScore;
  feedback: Feedback;
}

export async function runFullAnalysis(
  audioBlob: Blob,
  segments: TranscriptSegment[],
  prosodySamples: ProsodySample[]
): Promise<AnalysisResult>
```

**ì²´ì´ë‹ ë‹¨ê³„:**
1. **í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬**: ì„¸ê·¸ë¨¼íŠ¸ â†’ ì—°ì† í…ìŠ¤íŠ¸
2. **ê°ì • ë¶„ì„**: ì „ì‚¬ í…ìŠ¤íŠ¸ â†’ EmotionAnalysis
3. **ìƒí˜¸ì‘ìš© ë¶„ì„**: ì „ì‚¬ + ë©”íƒ€ë°ì´í„° â†’ ConversationAnalysis
4. **ì ìˆ˜ ê³„ì‚°**: ê°ì • + ìƒí˜¸ì‘ìš© + ìŒì„±íŠ¹ì„± â†’ MatchScore
5. **í”¼ë“œë°± ìƒì„±**: ëª¨ë“  ê²°ê³¼ â†’ Feedback

### 5.6 ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ (/domain/analysis/scoring.ts)
```typescript
export function computeMatchScore(
  emotion: EmotionAnalysis,
  conversation: ConversationAnalysis,
  prosodySummary: ProsodySummary
): MatchScore {
  // ê°€ì¤‘ í•©ì‚° ì•Œê³ ë¦¬ì¦˜
  const textScore = 0.5 * normalizeValence(emotion.valence) + 
                   0.5 * conversation.rapport;
  
  const voiceScore = 0.7 * assessProsodyHealth(prosodySummary) + 
                    0.3 * emotion.arousal;
  
  const balanceScore = assessTurnTakingBalance(conversation.turnTakingBalance);
  
  const finalScore = 0.45 * textScore + 
                    0.35 * voiceScore + 
                    0.20 * balanceScore;
  
  return {
    score: Math.round(finalScore * 100),
    breakdown: {
      text: Math.round(textScore * 100),
      voice: Math.round(voiceScore * 100),
      balance: Math.round(balanceScore * 100)
    }
  };
}
```

## 6. AI í”„ë¡¬í”„íŠ¸ ì²´ì´ë‹ ì„¤ê³„ (PRD 4ë‹¨ê³„ êµ¬í˜„)

### 6.1 1ë‹¨ê³„: í…ìŠ¤íŠ¸ ê°ì • ë¶„ì„ í”„ë¡¬í”„íŠ¸
**ëª©ì **: ì „ì‚¬ëœ ëŒ€í™”ì—ì„œ ì •ì„œ(valence, arousal)ì™€ ì„¸ë¶€ ê°ì • ì¶”ì¶œ
**ëª¨ë¸**: gpt-4o-mini, ì˜¨ë„ 0.3, ìµœëŒ€ í† í° 300

```javascript
const emotionPrompt = `ë‹¹ì‹ ì€ ì†Œê°œíŒ… ëŒ€í™” ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë‹¤ìŒ ì „ì‚¬ ë‚´ìš©ì„ ë¶„ì„í•´ ê°ì • ìƒíƒœë¥¼ JSONìœ¼ë¡œ ë°˜í™˜í•˜ì„¸ìš”.

**ëŒ€í™” ì „ì‚¬:**
${transcriptText}

**ë¶„ì„ ìš”êµ¬ì‚¬í•­:**
- valence: -1(ë§¤ìš° ë¶€ì •ì ) ~ +1(ë§¤ìš° ê¸ì •ì )
- arousal: 0(ë§¤ìš° ì°¨ë¶„) ~ 1(ë§¤ìš° í¥ë¯¸ì§„ì§„)
- 5ê°€ì§€ ê¸°ë³¸ ê°ì •ë³„ ê°•ë„ ì¸¡ì •

**JSON ì¶œë ¥ í˜•ì‹:**
{
  "valence": 0.0,
  "arousal": 0.0, 
  "emotions": [
    {"label": "joy", "score": 0.0},
    {"label": "anger", "score": 0.0},
    {"label": "sadness", "score": 0.0},
    {"label": "fear", "score": 0.0},
    {"label": "surprise", "score": 0.0}
  ],
  "evidence": ["ê°ì •ì„ ë³´ì—¬ì£¼ëŠ” êµ¬ì²´ì  í‘œí˜„ 2ê°€ì§€"]
}`;
```

### 6.2 2ë‹¨ê³„: ìƒí˜¸ì‘ìš© ë¶„ì„ í”„ë¡¬í”„íŠ¸  
**ëª©ì **: ëŒ€í™” íŒ¨í„´, ë¼í¬, ê³µê°ë„ ë¶„ì„ + ê²½ê³  ì‹ í˜¸ íƒì§€
**ì…ë ¥**: ì „ì‚¬ í…ìŠ¤íŠ¸ + ë°œí™” í†µê³„ + prosody ìš”ì•½

```javascript
const interactionPrompt = `ì†Œê°œíŒ… ëŒ€í™”ì˜ ìƒí˜¸ì‘ìš© í’ˆì§ˆì„ ë¶„ì„í•˜ëŠ” ì „ë¬¸ê°€ë¡œì„œ ë‹¤ìŒì„ í‰ê°€í•´ì£¼ì„¸ìš”.

**ëŒ€í™” ë°ì´í„°:**
- ì „ì‚¬: ${transcriptText}
- ë°œí™” í†µê³„: ${speakingStats} // {myTurns: 12, partnerTurns: 15, myDuration: 45s, partnerDuration: 52s}
- ìŒì„± íŠ¹ì„±: ${prosodySummary} // {avgRMS: 0.3, rmsVariance: 0.2, silenceRatio: 0.15}

**ë¶„ì„ ê¸°ì¤€:**
- rapport: ì„œë¡œì— ëŒ€í•œ ê´€ì‹¬ê³¼ í˜¸ê° í‘œí˜„ ì •ë„
- turnTakingBalance: 0.5ê°€ ì´ìƒì  (50:50 ê· í˜•)
- empathy: ìƒëŒ€ë°© ê°ì •ì— ëŒ€í•œ ì´í•´ì™€ ê³µê° ë°˜ì‘
- redFlags: ë¶€ì •ì  ì‹ í˜¸ (ì¼ë°©ì  ëŒ€í™”, ë¬´ê´€ì‹¬, ë¶ˆí¸í•¨ í‘œí˜„ ë“±)
- highlights: ê¸ì •ì  ì‹ í˜¸ (ê³µí†µ ê´€ì‹¬ì‚¬, ìœ ë¨¸, ë°°ë ¤ ë“±)

**JSON ì¶œë ¥:**
{
  "rapport": 0.0,
  "turnTakingBalance": 0.0,
  "empathy": 0.0,
  "redFlags": ["êµ¬ì²´ì  ê²½ê³  ì‹ í˜¸ë“¤"],
  "highlights": ["ê¸ì •ì  í•˜ì´ë¼ì´íŠ¸ë“¤"]
}`;
```

### 6.3 3ë‹¨ê³„: ì ìˆ˜ ì‚°ì¶œ (ìˆœìˆ˜ í•¨ìˆ˜)
**ëª©ì **: 1-2ë‹¨ê³„ ê²°ê³¼ + prosodyë¡œ ìµœì¢… ë§¤ì¹­ìœ¨ ê³„ì‚°
**êµ¬í˜„**: /domain/analysis/scoring.ts (PRD ê³µì‹ ì ìš©)

```typescript
// PRD ëª…ì‹œ ê³µì‹: 0.45*text + 0.35*voice + 0.20*balance
export function computeMatchScore(
  emotion: EmotionAnalysis,
  conversation: ConversationAnalysis, 
  prosodySummary: ProsodySummary
): MatchScore {
  // í…ìŠ¤íŠ¸ ì ìˆ˜: ê°ì • + ë¼í¬
  const textScore = 0.5 * ((emotion.valence + 1) / 2) + 0.5 * conversation.rapport;
  
  // ìŒì„± ì ìˆ˜: prosody ê±´ê°•ë„ + ê°ì„±ë„
  const voiceScore = 0.7 * assessProsodyHealth(prosodySummary) + 0.3 * emotion.arousal;
  
  // ê· í˜• ì ìˆ˜: 0.5ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ë†’ì€ ì ìˆ˜
  const balanceScore = 1 - Math.abs(conversation.turnTakingBalance - 0.5) * 2;
  
  const finalScore = 0.45 * textScore + 0.35 * voiceScore + 0.20 * balanceScore;
  
  return {
    score: Math.round(finalScore * 100),
    breakdown: {
      text: Math.round(textScore * 100),
      voice: Math.round(voiceScore * 100), 
      balance: Math.round(balanceScore * 100)
    }
  };
}
```

### 6.4 4ë‹¨ê³„: í”¼ë“œë°± ìƒì„± í”„ë¡¬í”„íŠ¸
**ëª©ì **: ì¢…í•© ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì¡°ì–¸ ì œê³µ
**í†¤**: ë”°ëœ»í•˜ê³  ê±´ì„¤ì  (ìœŒìœ  ë¸Œëœë“œ ë¬´ë“œ)

```javascript
const feedbackPrompt = `ë‹¹ì‹ ì€ ë”°ëœ»í•˜ê³  ì‹ ë¢°ê° ìˆëŠ” ë°ì´íŒ… ì½”ì¹˜ì…ë‹ˆë‹¤. ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê±´ì„¤ì  í”¼ë“œë°±ì„ ì œê³µí•˜ì„¸ìš”.

**ë¶„ì„ ê²°ê³¼:**
- ë§¤ì¹­ ì ìˆ˜: ${matchScore}/100 (í…ìŠ¤íŠ¸: ${breakdown.text}, ìŒì„±: ${breakdown.voice}, ê· í˜•: ${breakdown.balance})
- ê°ì • ë¶„ì„: valence ${emotion.valence}, ì£¼ìš” ê°ì • ${dominantEmotion}
- ìƒí˜¸ì‘ìš©: ë¼í¬ ${conversation.rapport}, ê³µê° ${conversation.empathy}
- ê²½ê³  ì‹ í˜¸: ${conversation.redFlags}
- ê¸ì • í¬ì¸íŠ¸: ${conversation.highlights}

**í”¼ë“œë°± ìš”êµ¬ì‚¬í•­:**
- ë¸Œëœë“œ í†¤: ë”°ëœ»í•˜ê³  ê²©ë ¤í•˜ëŠ” ë§íˆ¬, "ê°ì •ì€ ì„¬ì„¸í•˜ê²Œ, ê²°ê³¼ëŠ” ê°„ë‹¨í•˜ê²Œ"
- summary: ì „ì²´ì ì¸ ëŒ€í™” íë¦„ì„ 2-3ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½
- tips: ë‹¤ìŒ ë°ì´íŠ¸ì—ì„œ ë°”ë¡œ ì‹¤ì²œí•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì  ì¡°ì–¸ 3ê°œ

**JSON ì¶œë ¥:**
{
  "summary": "ì˜¤ëŠ˜ ëŒ€í™”ì—ì„œ ì„œë¡œì— ëŒ€í•œ ê´€ì‹¬ì´ ì˜ ë“œëŸ¬ë‚¬ì–´ìš”. íŠ¹íˆ ê³µí†µ ê´€ì‹¬ì‚¬ì— ëŒ€í•œ ì´ì•¼ê¸°ì—ì„œ ìì—°ìŠ¤ëŸ¬ìš´ í˜¸ê°ì´ ëŠê»´ì¡ŒìŠµë‹ˆë‹¤.",
  "tips": [
    "ìƒëŒ€ë°©ì´ ë§í•  ë•Œ 2-3ì´ˆ ë” ê¸°ë‹¤ë ¤ë³´ì„¸ìš”. ì—¬ìœ ë¡œìš´ í˜¸í¡ì´ ë” ê¹Šì€ ëŒ€í™”ë¥¼ ë§Œë“¤ì–´ìš”.",
    "ë‹¤ìŒë²ˆì—” ê°ì •ì„ í‘œí˜„í•˜ëŠ” ë‹¨ì–´ë¥¼ í•˜ë‚˜ì”© ë” ì¨ë³´ì„¸ìš”. 'ì¢‹ë‹¤'ë³´ë‹¤ëŠ” 'ì„¤ë ˆë„¤', 'ì¬ë°Œë‹¤'ë³´ë‹¤ëŠ” 'í¥ë¯¸ì§„ì§„í•´'ì²˜ëŸ¼ìš”.",
    "ìƒëŒ€ë°©ì˜ ê´€ì‹¬ì‚¬ì— ì§ˆë¬¸ì„ í•˜ë‚˜ ë” í•´ë³´ì„¸ìš”. í˜¸ê¸°ì‹¬ì´ í˜¸ê°ìœ¼ë¡œ ì „í•´ì ¸ìš”."
  ]
}`;
```

## 7. ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ê³„ (/domain/controllers/useAnalysisController.ts)

```typescript
export function useAnalysisController() {
  const store = useSessionStore();
  
  const startSession = async () => {
    store.reset();
    store.setPhase("recording");
    
    // ìŒì„± ë…¹ìŒ ì‹œì‘
    await AudioRecorder.start();
    
    // ì‹¤ì‹œê°„ ìŒì„± íŠ¹ì„± ìˆ˜ì§‘ ì‹œì‘
    const stopProsody = ProsodyAnalyzer.start((sample) => {
      store.pushProsody(sample);
    });
    
    // ì‹¤ì‹œê°„ STT ì‹œì‘ (ì„ íƒì )
    const stt = new WebSpeechSTT();
    stt.transcribeRealtime((segment) => {
      store.pushSegment(segment);
    });
  };
  
  const stopAndAnalyze = async () => {
    try {
      store.setPhase("processing");
      
      // 1ë‹¨ê³„: ë…¹ìŒ ì¤‘ì§€ ë° STT
      const audioBlob = await AudioRecorder.stop();
      store.setAudioBlob(audioBlob);
      
      // 2ë‹¨ê³„: ì „ì²´ ë¶„ì„ ì‹¤í–‰
      const result = await runFullAnalysis(
        audioBlob,
        store.segments,
        store.prosody
      );
      
      // 3ë‹¨ê³„: ê²°ê³¼ ì €ì¥
      store.setEmotion(result.emotion);
      store.setConversation(result.conversation);
      store.setMatch(result.match);
      store.setFeedback(result.feedback);
      store.setPhase("done");
      
    } catch (error: any) {
      store.setError(error.message);
      store.setPhase("error");
    }
  };
  
  const resetSession = () => {
    store.reset();
  };
  
  return {
    startSession,
    stopAndAnalyze,
    resetSession,
    phase: store.phase,
    isRecording: store.phase === "recording",
    isProcessing: store.phase === "processing",
    isDone: store.phase === "done",
    hasError: store.phase === "error"
  };
}
```

## 8. UI ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ (Design System ì—°ë™)

### 8.1 SessionRecorder ì»´í¬ë„ŒíŠ¸
```typescript
interface SessionRecorderProps {
  phase: SessionPhase;
  duration: number;          // ë…¹ìŒ ì‹œê°„ (ì´ˆ)
  prosodyLevel: number;      // 0-1 ë ˆë²¨ë¯¸í„°ìš©
  onStart: () => void;
  onStop: () => void;
}
```
**Design System ì ìš©**:
- í° ì›í˜• ë²„íŠ¼ (120px, primary color #E95877)
- ë…¹ìŒ ì¤‘: í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜ + danger color (#E11D48)
- íƒ€ì´ë¨¸: H3 í¬ê¸° (20px), gray700
- ë ˆë²¨ë¯¸í„°: 6ì¹¸ ë§‰ëŒ€, accent color (#7B6EF6)

### 8.2 LiveTranscriptPanel ì»´í¬ë„ŒíŠ¸
```typescript
interface LiveTranscriptPanelProps {
  segments: TranscriptSegment[];
  isRealtime: boolean;
}
```
**Design System ì ìš©**:
- ë§í’ì„  UI: ë‚˜(ì¢Œì¸¡, primary100 ë°°ê²½) vs ìƒëŒ€(ìš°ì¸¡, gray100 ë°°ê²½)
- í°íŠ¸: Body 16px, line-height 26px
- ì—¬ë°±: padding 12px, margin 8px
- ìŠ¤í¬ë¡¤: ìë™, ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜

### 8.3 ScoreGauge ì»´í¬ë„ŒíŠ¸
```typescript
interface ScoreGaugeProps {
  score: number;             // 0-100
  breakdown?: {              // ì„¸ë¶€ ì ìˆ˜ (íˆ´íŒ)
    text: number;
    voice: number; 
    balance: number;
  };
  animated?: boolean;
}
```
**Design System ì ìš©**:
- ë°˜ì›í˜• ê²Œì´ì§€: 200px ì§€ë¦„, ë‘ê»˜ 12px
- ìƒ‰ìƒ: primary (#E95877) â†’ success (#2FBF71) ê·¸ë¼ë°ì´ì…˜
- ì¤‘ì•™ ì ìˆ˜: H2 í¬ê¸° (28px Bold)
- ì• ë‹ˆë©”ì´ì…˜: 250ms spring easing
- breakdown íˆ´íŒ: elev2 shadow

### 8.4 AnalysisSummaryCard ì»´í¬ë„ŒíŠ¸
```typescript
interface AnalysisSummaryCardProps {
  title: string;             // "ê°ì • ë¶„ì„", "ìƒí˜¸ì‘ìš©"
  kpis: Array<{              // í•µì‹¬ ì§€í‘œ 2-3ê°œ
    label: string;           // "Valence", "Rapport"
    value: string;           // "+0.42", "ë†’ìŒ"
    color?: 'primary' | 'success' | 'warning';
  }>;
  evidence?: string;         // 1-2ì¤„ ê·¼ê±°
}
```
**Design System ì ìš©**:
- ì¹´ë“œ: radius md (12px), shadow elev1, padding 16px
- í—¤ë”: H3 í¬ê¸° (20px SemiBold) + ì•„ì´ì½˜ (24px)
- KPI ì¹©: radius xs (6px), ìƒ‰ìƒ ë§¤í•‘ (primary/success/warning)
- ê·¼ê±°: Caption í¬ê¸° (13px), gray700

### 8.5 FeedbackBubble ì»´í¬ë„ŒíŠ¸
```typescript
interface FeedbackBubbleProps {
  feedback: Feedback;
  showTyping?: boolean;      // íƒ€ì´í•‘ íš¨ê³¼
}
```
**Design System ì ìš©**:
- ë§í’ì„ : radius lg (20px), primary100 ë°°ê²½
- ìš”ì•½: Body í¬ê¸° (16px), 2-3ì¤„, ì§„í•œ ê¸€ì”¨
- íŒ ë¦¬ìŠ¤íŠ¸: Caption í¬ê¸° (13px), ë¶ˆë¦¿ í¬ì¸íŠ¸
- íƒ€ì´í•‘ ì• ë‹ˆë©”ì´ì…˜: 150ms fade-in ìˆœì°¨ ì ìš©

### 8.6 ìƒíƒœë³„ í™”ë©´ ë ˆì´ì•„ì›ƒ (Design System íŒ¨í„´)

**Idle (ëŒ€ê¸° ìƒíƒœ)**
```typescript
// ë ˆì´ì•„ì›ƒ: ì¤‘ì•™ ì •ë ¬, ì—¬ë°± ë„‰ë„‰íˆ
<section className="min-h-screen flex flex-col justify-center items-center space-y-8">
  <h1 className="text-h1 font-bold text-gray900">{copy.hero}</h1>
  <SessionRecorder phase="idle" />
  <p className="text-caption text-gray500">{copy.privacy}</p>
</section>
```

**Recording (ë…¹ìŒ ì¤‘)**
```typescript
// ë ˆì´ì•„ì›ƒ: 2ì»¬ëŸ¼ (ì¢Œ: ì»¨íŠ¸ë¡¤, ìš°: ì‹¤ì‹œê°„ ë°ì´í„°)
<div className="grid grid-cols-1 lg:grid-cols-2 gap-8 p-6">
  <div className="space-y-6">
    <SessionRecorder phase="recording" />
    <ProsodySparkline samples={prosody} />
  </div>
  <LiveTranscriptPanel segments={segments} isRealtime />
</div>
```

**Processing (ë¶„ì„ ì¤‘)**
```typescript
// ë ˆì´ì•„ì›ƒ: ì¤‘ì•™ ë¡œë”©, Progress Bar
<div className="flex flex-col items-center space-y-6">
  <ProgressBar steps={3} current={currentStep} />
  <p className="text-body text-gray700">{copy.processing.analyzing}</p>
</div>
```

**Done (ê²°ê³¼)**  
```typescript
// ë ˆì´ì•„ì›ƒ: ì¢Œì¸¡ ì ìˆ˜, ìš°ì¸¡ ë¶„ì„, í•˜ë‹¨ í”¼ë“œë°±
<div className="grid grid-cols-1 lg:grid-cols-7 gap-8">
  <div className="lg:col-span-3">
    <ScoreGauge score={match.score} breakdown={match.breakdown} />
  </div>
  <div className="lg:col-span-4 space-y-4">
    <AnalysisSummaryCard title="ê°ì •" kpis={emotionKPIs} />
    <AnalysisSummaryCard title="ìƒí˜¸ì‘ìš©" kpis={conversationKPIs} />
  </div>
  <div className="lg:col-span-7">
    <FeedbackBubble feedback={feedback} showTyping />
    <ControlsBar />
  </div>
</div>
```

## 9. ì„±ëŠ¥ ë° ìµœì í™”

### 9.1 ìŒì„± ì²˜ë¦¬ ìµœì í™”
- **ì²­í¬ í¬ê¸°**: 1ì´ˆ ë‹¨ìœ„ë¡œ ì²˜ë¦¬
- **ìƒ˜í”Œë§ ë ˆì´íŠ¸**: 16kHz (STT ìµœì í™”)
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ë¶ˆí•„ìš”í•œ ìŒì„± ë°ì´í„° ì •ë¦¬

### 9.2 API ìµœì í™”
- **í† í° ì ˆì•½**: ê¸´ ëŒ€í™”ëŠ” ìš”ì•½ í›„ ë¶„ì„
- **ë³‘ë ¬ ì²˜ë¦¬**: ë…ë¦½ì  ë¶„ì„ì€ ë™ì‹œ ì‹¤í–‰
- **ìºì‹±**: ë™ì¼ ì…ë ¥ì— ëŒ€í•œ ê²°ê³¼ ìºì‹œ (ê°œë°œ ì¤‘)

### 9.3 UI ì„±ëŠ¥
- **ì§€ì—° ë¡œë”©**: í° ì»´í¬ë„ŒíŠ¸ëŠ” lazy loading
- **ë©”ëª¨ì´ì œì´ì…˜**: ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
- **ì• ë‹ˆë©”ì´ì…˜**: CSS ì• ë‹ˆë©”ì´ì…˜ ì‚¬ìš© (JS ì• ë‹ˆë©”ì´ì…˜ ìµœì†Œí™”)

## 10. ì ‘ê·¼ì„± ê°€ì´ë“œë¼ì¸ (Design System A11y)

### 10.1 ìƒ‰ìƒ ì ‘ê·¼ì„±
**ìƒ‰ìƒ ëŒ€ë¹„ AA ì´ìƒ ì¤€ìˆ˜** (4.5:1 ë¹„ìœ¨)
```css
/* ì£¼ìš” í…ìŠ¤íŠ¸ ì¡°í•© ê²€ì¦ */
.text-primary { color: #E95877; background: #FFFFFF; } /* ëŒ€ë¹„ìœ¨: 4.8:1 âœ… */
.text-gray900 { color: #1A1A1A; background: #FFFFFF; } /* ëŒ€ë¹„ìœ¨: 13.3:1 âœ… */
.text-gray700 { color: #4D4D4D; background: #FFFFFF; } /* ëŒ€ë¹„ìœ¨: 7.2:1 âœ… */
.text-gray500 { color: #9CA3AF; background: #FFFFFF; } /* ëŒ€ë¹„ìœ¨: 4.6:1 âœ… */
```

**ìƒ‰ìƒë§Œ ì˜ì¡´í•˜ì§€ ì•Šê¸°**
- ScoreGauge: ìƒ‰ìƒ + ìˆ«ì í‘œì‹œ ë³‘í–‰
- AnalysisCard KPI: ìƒ‰ìƒ + ë¼ë²¨ + ì•„ì´ì½˜ íŠ¸ë¦¬í”Œ í‘œì‹œ
- ìƒíƒœ í‘œì‹œ: primary100 ë°°ê²½ + "ë‚˜" í…ìŠ¤íŠ¸ ë¼ë²¨

### 10.2 í‚¤ë³´ë“œ ë‚´ë¹„ê²Œì´ì…˜
```css
/* í¬ì»¤ìŠ¤ ë§ ì¼ê´€ì„± */
.focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: var(--radius-xs);
}
```

**Tab ìˆœì„œ**:
1. SessionRecorder ë²„íŠ¼ â†’ 2. ControlsBar â†’ 3. ScoreGauge (í¬ì»¤ìŠ¤ ê°€ëŠ¥) â†’ 4. FeedbackBubble

### 10.3 ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›
```typescript
// í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ARIA ì†ì„±
<button 
  aria-label={phase === 'idle' ? 'ë…¹ìŒ ì‹œì‘' : 'ë…¹ìŒ ì¤‘ì§€'}
  aria-describedby="recording-help"
>
  {/* ë…¹ìŒ ë²„íŠ¼ */}
</button>

<div role="progressbar" aria-valuenow={score} aria-valuemin={0} aria-valuemax={100}>
  <span className="sr-only">ë§¤ì¹­ìœ¨ ì ìˆ˜: {score}ì </span>
</div>

<div role="region" aria-labelledby="feedback-title">
  <h3 id="feedback-title">ëŒ€í™” ê°œì„  ì œì•ˆ</h3>
  {/* FeedbackBubble ë‚´ìš© */}
</div>
```

### 10.4 ëª¨ì…˜ ì ‘ê·¼ì„± (prefers-reduced-motion)
```css
@media (prefers-reduced-motion: reduce) {
  .score-gauge-animation,
  .typing-animation,
  .pulse-animation {
    animation: none;
  }
  
  .transition-all {
    transition: none;
  }
}
```

### 10.5 ì–¸ì–´ ì ‘ê·¼ì„±
- **ì‰¬ìš´ ë‹¨ì–´ ì‚¬ìš©**: "ë§¤ì¹­ìœ¨" (X) â†’ "ëŒ€í™” í˜¸ê°ë„" (O)
- **ë¯¼ê° ë‚´ìš© ë°°ë ¤**: "ë‹¤ìŒë²ˆì—” ì´ë ‡ê²Œ í•´ë³´ì„¸ìš”" (ë¶€ë“œëŸ¬ìš´ ì œì•ˆ)
- **ì—ëŸ¬ ë©”ì‹œì§€**: êµ¬ì²´ì  í•´ê²° ë°©ë²• í¬í•¨

## 11. ì—ëŸ¬ ì²˜ë¦¬ ë° ì˜ˆì™¸ ìƒí™©

### 10.1 ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
```typescript
// ê¸°ëŠ¥ ê°ì§€ ë° ëŒ€ì•ˆ ì œê³µ
const checkBrowserSupport = () => {
  const features = {
    mediaRecorder: !!window.MediaRecorder,
    webAudio: !!window.AudioContext || !!window.webkitAudioContext,
    speechRecognition: !!window.SpeechRecognition || !!window.webkitSpeechRecognition
  };
  
  return features;
};
```

### 10.2 API ì—ëŸ¬ í•¸ë“¤ë§
```typescript
// OpenAI API ì—ëŸ¬ ì²˜ë¦¬
const handleAPIError = (error: any) => {
  if (error.status === 429) {
    return "API ì‚¬ìš©ëŸ‰ í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
  }
  if (error.status === 401) {
    return "API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
  }
  return "ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
};
```

### 10.3 ë§ˆì´í¬ ê¶Œí•œ ì—ëŸ¬
- ê¶Œí•œ ê±°ë¶€ ì‹œ ëŒ€ì•ˆ ì œê³µ (íŒŒì¼ ì—…ë¡œë“œ)
- ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€
- ë¸Œë¼ìš°ì €ë³„ ê¶Œí•œ ì„¤ì • ê°€ì´ë“œ

## 11. ë³´ì•ˆ ë° í”„ë¼ì´ë²„ì‹œ

### 11.1 ë°ì´í„° ì²˜ë¦¬ ì›ì¹™
- **ë¡œì»¬ ìš°ì„ **: ëª¨ë“  ì²˜ë¦¬ë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ
- **ì„ì‹œ ì €ì¥**: ì„¸ì…˜ ì¢…ë£Œ ì‹œ ëª¨ë“  ë°ì´í„° ì‚­ì œ
- **ìµœì†Œ ìˆ˜ì§‘**: ë¶„ì„ì— í•„ìš”í•œ ìµœì†Œí•œì˜ ë°ì´í„°ë§Œ

### 11.2 API í‚¤ ë³´ì•ˆ
```typescript
// í™˜ê²½ë³€ìˆ˜ë¥¼ í†µí•œ API í‚¤ ê´€ë¦¬
const OPENAI_API_KEY = process.env.NEXT_PUBLIC_OPENAI_API_KEY;

// í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ í˜¸ì¶œí•˜ë¯€ë¡œ í‚¤ê°€ ë…¸ì¶œë¨
// í”„ë¡œë•ì…˜ì—ì„œëŠ” ë°±ì—”ë“œ í”„ë¡ì‹œ ê¶Œì¥
```

### 11.3 ì‚¬ìš©ì ë™ì˜
- ë…¹ìŒ ì‹œì‘ ì „ ëª…ì‹œì  ë™ì˜ íšë“
- ë°ì´í„° ì‚¬ìš© ëª©ì  ëª…í™•íˆ ì„¤ëª…
- ì–¸ì œë“  ì¤‘ë‹¨ ê°€ëŠ¥í•œ ì˜µì…˜ ì œê³µ

## 12. ë°°í¬ ë° í™˜ê²½ ì„¤ì •

### 12.1 í™˜ê²½ ë³€ìˆ˜
```bash
# .env.local
NEXT_PUBLIC_OPENAI_API_KEY=sk-...
NEXT_PUBLIC_APP_ENV=development
```

### 12.2 ë¹Œë“œ ì„¤ì •
```typescript
// next.config.ts
export default {
  typescript: {
    ignoreBuildErrors: false,
  },
  eslint: {
    ignoreDuringBuilds: false,
  },
  // PWA ì„¤ì • (ì„ íƒì )
  pwa: {
    dest: 'public',
    register: true,
    skipWaiting: true,
  }
};
```

### 12.3 Vercel ë°°í¬ ì„¤ì •
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "installCommand": "npm install"
}
```

## 13. ê°œë°œ ì¼ì • (4ì‹œê°„ ë¶„í•  + Design System ë°˜ì˜)

### Hour 1: ê¸°ë°˜ êµ¬ì¡° + Design System ì„¤ì • (25%)
- [x] Next.js í”„ë¡œì íŠ¸ ì´ˆê¸°í™” + Pretendard/Inter í°íŠ¸ ì„¤ì •
- [x] í´ë” êµ¬ì¡° ìƒì„± (PRD ê¸°ì¤€: /components, /store, /domain, /lib)
- [x] Design Token êµ¬í˜„ (/lib/tokens.ts, globals.css ë³€ìˆ˜)
- [x] Zustand ìŠ¤í† ì–´ ë¼ˆëŒ€ (SessionState íƒ€ì… ì •ì˜)
- [x] shadcn/ui ê¸°ë³¸ ì„¤ì • + ì»¤ìŠ¤í…€ í…Œë§ˆ

### Hour 2: ìŒì„± ì²˜ë¦¬ + í•µì‹¬ ì»´í¬ë„ŒíŠ¸ (30%)
- [ ] AudioRecorder êµ¬í˜„ (MediaRecorder API)
- [ ] ProsodyAnalyzer êµ¬í˜„ (Web Audio, RMS ê³„ì‚°)
- [ ] Web Speech API ì–´ëŒ‘í„° (ì‹¤ì‹œê°„ ì „ì‚¬)
- [ ] SessionRecorder ì»´í¬ë„ŒíŠ¸ (Design System ì ìš©)
- [ ] LiveTranscriptPanel ê¸°ë³¸ êµ¬í˜„

### Hour 3: AI ë¶„ì„ íŒŒì´í”„ë¼ì¸ (30%)
- [ ] OpenAI ì–´ëŒ‘í„° êµ¬í˜„ (gpt-4o-mini, JSON ëª¨ë“œ)
- [ ] 4ë‹¨ê³„ í”„ë¡¬í”„íŠ¸ ì²´ì´ë‹ ë¡œì§ êµ¬í˜„
- [ ] ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ (PRD ê³µì‹: 0.45*text + 0.35*voice + 0.20*balance)
- [ ] useAnalysisController í›… ì™„ì„±
- [ ] ScoreGauge + AnalysisSummaryCard êµ¬í˜„

### Hour 4: UI ì™„ì„± + í†µí•© í…ŒìŠ¤íŠ¸ (15%)
- [ ] FeedbackBubble + ControlsBar êµ¬í˜„
- [ ] ìƒíƒœë³„ ë ˆì´ì•„ì›ƒ ì™„ì„± (Idle/Recording/Processing/Done)
- [ ] ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸ (ë…¹ìŒâ†’ë¶„ì„â†’í”¼ë“œë°±)
- [ ] ê¸°ë³¸ ì ‘ê·¼ì„± ì ìš© (ARIA, í‚¤ë³´ë“œ ë‚´ë¹„ê²Œì´ì…˜)
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ + UX Writing ì ìš©

**ìš°ì„ ìˆœìœ„ ì¡°ì •**:
- **í•µì‹¬ ê¸°ëŠ¥**: ë…¹ìŒ + STT + ê°„ë‹¨í•œ ê°ì •ë¶„ì„ + í”¼ë“œë°± (3ì‹œê°„)
- **ë¶€ê°€ ê¸°ëŠ¥**: ì‹¤ì‹œê°„ prosody, ìƒì„¸í•œ UI ì• ë‹ˆë©”ì´ì…˜ (1ì‹œê°„)
- **ë¹„ìƒ ê³„íš**: OpenAI í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ë”ë¯¸ ë°ì´í„°ë¡œ UI ì‹œì—°

## 14. í™•ì¥ ê°€ëŠ¥ì„± (í•´ì»¤í†¤ ì´í›„)

### 14.1 ë‹¨ê¸° ê°œì„ ì‚¬í•­ (1ì£¼)
- Google Speech-to-Text ì—°ë™
- í”¼ì¹˜ ë¶„ì„ ê³ ë„í™”
- UI/UX ê°œì„  (ì• ë‹ˆë©”ì´ì…˜, ë°˜ì‘í˜•)

### 14.2 ì¤‘ê¸° í™•ì¥ (1ê°œì›”)
- ë°±ì—”ë“œ API ì„œë²„ êµ¬ì¶•
- ì‚¬ìš©ì ê³„ì • ë° íˆìŠ¤í† ë¦¬
- ëª¨ë°”ì¼ ì•± ê°œë°œ

### 14.3 ì¥ê¸° ë¹„ì „ (3ê°œì›”)
- ì‹¤ì‹œê°„ í™”ìƒ í†µí™” ì§€ì›
- í‘œì • ë¶„ì„ (MediaPipe)
- ê°œì¸í™” í•™ìŠµ ëª¨ë¸

---

## 15. ë°ëª¨ ì‹œë‚˜ë¦¬ì˜¤ (í•´ì»¤í†¤ ë°œí‘œìš©)

### 15.1 ì‹œì—° ìŠ¤í† ë¦¬ë³´ë“œ (3ë¶„)
1. **ì˜¤í”„ë‹** (30ì´ˆ): "ì†Œê°œíŒ…ì—ì„œ ëŠê¼ˆë˜ ì•„ì‰¬ì›€, AIê°€ í•´ê²°í•´ë“œë¦´ê²Œìš”"
2. **ê¸°ëŠ¥ ì†Œê°œ** (60ì´ˆ): ë…¹ìŒ â†’ ì‹¤ì‹œê°„ ì „ì‚¬ â†’ AI ë¶„ì„ â†’ ê°œì„  ì œì•ˆ í”Œë¡œìš°
3. **ì‹¤ì œ ë°ëª¨** (90ì´ˆ): 
   - ì§§ì€ ëŒ€í™” ë…¹ìŒ (2ëª…ì´ ê°„ë‹¨í•œ ì†Œê°œíŒ… ìƒí™© ì—°ì¶œ)
   - ì‹¤ì‹œê°„ ì „ì‚¬ í™”ë©´ ë³´ì—¬ì£¼ê¸°
   - 3ì´ˆ ë§Œì— ë§¤ì¹­ìœ¨ ì ìˆ˜ + í”¼ë“œë°± ë“±ì¥
   - "ë‹¤ìŒë²ˆì—” ì´ë ‡ê²Œ í•´ë³´ì„¸ìš”" ì‹¤ìš©ì  íŒ ê°•ì¡°

### 15.2 ìƒ˜í”Œ ë°ì´í„° (OpenAI ì‹¤íŒ¨ ì‹œ)
```typescript
const demoResults = {
  matchScore: { score: 73, breakdown: { text: 78, voice: 69, balance: 71 } },
  feedback: {
    summary: "ëŒ€í™”ì—ì„œ ì„œë¡œì— ëŒ€í•œ í˜¸ê¸°ì‹¬ì´ ì˜ ë“œëŸ¬ë‚¬ì–´ìš”. íŠ¹íˆ ê³µí†µ ê´€ì‹¬ì‚¬ë¥¼ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì´ ìì—°ìŠ¤ëŸ¬ì› ìŠµë‹ˆë‹¤.",
    tips: [
      "ìƒëŒ€ë°©ì´ ë§í•  ë•Œ 2-3ì´ˆ ë” ê¸°ë‹¤ë ¤ë³´ì„¸ìš”. ì—¬ìœ ë¡œìš´ í˜¸í¡ì´ ë” ê¹Šì€ ëŒ€í™”ë¥¼ ë§Œë“¤ì–´ìš”.",
      "ê°ì • í‘œí˜„ì„ í•œ ë‹¨ê³„ ë” êµ¬ì²´ì ìœ¼ë¡œ í•´ë³´ì„¸ìš”. 'ì¬ë°Œë‹¤'ë³´ë‹¤ëŠ” 'í¥ë¯¸ì§„ì§„í•´ìš”'ì²˜ëŸ¼ìš”.",
      "ì§ˆë¬¸ ëì— 'ì–´ë– ì„¸ìš”?'ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”. ìƒëŒ€ë°©ì˜ ì˜ê²¬ì„ ë” ëŒì–´ë‚¼ ìˆ˜ ìˆì–´ìš”."
    ]
  }
};
```

---

## 16. ê²°ë¡ : í•˜íŠ¸ì‹œê·¸ë„ MVP ì™„ì„± ê°€ì´ë“œ

ì´ TRDëŠ” **PRDì™€ Design Systemì„ ì™„ì „íˆ í†µí•©**í•œ 4ì‹œê°„ í•´ì»¤í†¤ MVP ê¸°ìˆ  ì„¤ê³„ì„œì…ë‹ˆë‹¤. 

### 16.1 í•µì‹¬ ì„±ê³µ ìš”ì†Œ
**ë¸Œëœë“œ ì¼ê´€ì„±**: ìœŒìœ  ë¬´ë“œì˜ **ë”°ëœ»í•¨ + ì‹ ë¢°ê°**ì„ ê¸°ìˆ ë¡œ êµ¬í˜„
- Design Token ê¸°ë°˜ ì¼ê´€ëœ UI (#E95877 primary, ì—¬ë°± ìš°ì„  ë ˆì´ì•„ì›ƒ)
- UX Writingìœ¼ë¡œ ì¹œê·¼í•˜ê³  ì•ˆì‹¬ë˜ëŠ” í†¤ì•¤ë§¤ë„ˆ
- ì ‘ê·¼ì„± ê³ ë ¤í•œ í¬ìš©ì  ì‚¬ìš©ì ê²½í—˜

**ê¸°ìˆ ì  ì‹¤ìš©ì„±**: 4ì‹œê°„ ë‚´ ì‹¤í˜„ ê°€ëŠ¥í•œ ì„¤ê³„
- React Zustandë§Œìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ (ë°±ì—”ë“œ ì—†ìŒ)
- Web Speech API â†’ OpenAI ì²´ì´ë‹ìœ¼ë¡œ ìµœì†Œ ì˜ì¡´ì„±
- ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ê³¼ ì„±ëŠ¥ ìµœì í™” ê³ ë ¤

### 16.2 MVP ì„±ê³µ ê¸°ì¤€
- âœ… **í•µì‹¬ í”Œë¡œìš° ë™ì‘**: ë…¹ìŒ â†’ STT â†’ 4ë‹¨ê³„ AI ë¶„ì„ â†’ ì‹¤í–‰ ê°€ëŠ¥í•œ í”¼ë“œë°±
- âœ… **Design System êµ¬í˜„**: í† í° ê¸°ë°˜ ì¼ê´€ëœ UI, ë¸Œëœë“œ ë¬´ë“œ ë°˜ì˜
- âœ… **ì‚¬ìš©ì„±**: ì§ê´€ì  ì¸í„°í˜ì´ìŠ¤, 3ì´ˆ ë‚´ ê²°ê³¼, ì ‘ê·¼ì„± AA ì¤€ìˆ˜
- âœ… **ì‹œì—° ê°€ëŠ¥**: 4ì‹œê°„ ë‚´ ì„íŒ©íŠ¸ ìˆëŠ” ë°ëª¨ ì™„ì„±

### 16.3 ê¸°ìˆ ì  ë¦¬ìŠ¤í¬ì™€ ì™„í™”ì±…
- **OpenAI ë¹„ìš©**: gpt-4o-mini ì‚¬ìš©, í† í° ìµœì í™” í”„ë¡¬í”„íŠ¸
- **ë¸Œë¼ìš°ì € í˜¸í™˜ì„±**: Chrome ìš°ì„ , ê¸°ëŠ¥ ê°ì§€ + ëŒ€ì•ˆ ì œê³µ
- **ì‹¤ì‹œê°„ ì„±ëŠ¥**: í•µì‹¬ ê¸°ëŠ¥ ìš°ì„ , ë¶€ê°€ ê¸°ëŠ¥ í›„ìˆœìœ„
- **API í‚¤ ë³´ì•ˆ**: ë°ëª¨ìš© ì œí•œ ì‚¬ìš©, ì¶”í›„ ë°±ì—”ë“œ í”„ë¡ì‹œ ì ìš©

### 16.4 í™•ì¥ ë¡œë“œë§µ
**1ì£¼ í›„**: Google STT ì—°ë™, í”¼ì¹˜ ë¶„ì„ ê³ ë„í™”  
**1ê°œì›” í›„**: ë°±ì—”ë“œ + DB, ì‚¬ìš©ì ê³„ì •, íˆìŠ¤í† ë¦¬  
**3ê°œì›” í›„**: ì‹¤ì‹œê°„ í™”ìƒ í†µí™”, í‘œì • ë¶„ì„, ê°œì¸í™” ëª¨ë¸

---

**"ë‹¹ì‹ ì˜ ë§ê³¼ ë§ˆìŒ, ìš°ë¦¬ëŠ” ì„¬ì„¸í•˜ê²Œ ë“£ìŠµë‹ˆë‹¤."**

í•˜íŠ¸ì‹œê·¸ë„ì€ ê¸°ìˆ ì„ í†µí•´ ë” ë”°ëœ»í•˜ê³  ì˜ë¯¸ ìˆëŠ” ì¸ê°„ ê´€ê³„ë¥¼ ë•ëŠ” ì„œë¹„ìŠ¤ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì´ TRDë¥¼ ë°”íƒ•ìœ¼ë¡œ ì§‘ì¤‘ë„ ë†’ì€ 4ì‹œê°„ ê°œë°œë¡œ ì„íŒ©íŠ¸ ìˆëŠ” MVPë¥¼ ì™„ì„±í•˜ì„¸ìš”! ğŸš€
